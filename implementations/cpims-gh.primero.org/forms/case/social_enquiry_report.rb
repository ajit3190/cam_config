# frozen_string_literal: true

subform_other_children_fields = [
  Field.new(name: 'name_other_child',
            type: 'text_field',
            display_name_en: 'Name of child '),
  Field.new(name: 'sex_other_child',
            type: 'select_box',
            display_name_en: 'Sex',
            option_strings_source: 'lookup lookup-gender'),
  Field.new(name: 'age_other_child',
            type: 'numeric_field',
            display_name_en: 'Age'),
  Field.new(name: 'date_of_birth_other_child',
            type: 'date_field',
            display_name_en: 'Date of Birth'),
]

subform_other_children_section = FormSection.create_or_update!(
  visible: false,
  is_nested: true,
  mobile_form: true,
  order_form_group: 77,
  order: 100,
  order_subform: 1,
  unique_id: 'subform_other_children',
  parent_form: 'case',
  fields: subform_other_children_fields,
  editable: true,
  initial_subforms: 0,
  name_en: 'Other children in the family',
  description_en: 'Other children in the family Subform',
  collapsed_field_names: %w[]
)

social_enquiry_report_fields = [
  Field.new(name: 'assessment_approved',
            type: 'tick_box',
            tick_box_label_en: 'Yes',
            display_name_en: 'Approved by Manager',
            disabled: true,
            editable: false),
  Field.new(name: 'assessment_approved_date',
            type: 'date_field',
            display_name_en: 'Date',
            disabled: true,
            editable: false),
  Field.new(name: 'assessment_approved_comments',
            type: 'textarea',
            display_name_en: 'Manager Comments',
            disabled: true,
            editable: false),
  Field.new(name: 'approval_status_assessment',
            type: 'select_box',
            display_name_en: 'Approval Status',
            option_strings_source: 'lookup lookup-approval-status',
            disabled: true,
            editable: false),
  Field.new(name: 'separator_client_family_details',
            type: 'separator',
            display_name_en: "Client and Family Details"),
  Field.new(name: 'name_first',
            type: 'text_field',
            display_name_en: 'First Name',
            show_on_minify_form: true,
            required: true,
            hide_on_view_page: true,
            editable: false,
            disabled: true,
            visible: false),
  Field.new(name: 'name_middle',
            type: 'text_field',
            display_name_en: 'Middle Name',
            show_on_minify_form: true,
            hide_on_view_page: true,
            editable: false,
            disabled: true,
            visible: false),
  Field.new(name: 'name_last',
            type: 'text_field',
            display_name_en: 'Surname',
            show_on_minify_form: true,
            required: true,
            hide_on_view_page: true,
            editable: false,
            disabled: true,
            visible: false),
  Field.new(name: 'name',
            type: 'text_field',
            display_name_en: 'Full Name',
            help_text_en: "This information is copied from the \"Individual's Details\" form",
            required: false,
            show_on_minify_form: true,
            hidden_text_field: true,
            matchable: true,
            disabled: true),
  Field.new(name: 'name_nickname',
            type: 'text_field',
            display_name_en: 'Other Name / Nickname',
            help_text_en: "This information is copied from the \"Individual's Details\" form",
            show_on_minify_form: true,
            matchable: true,
            editable: false,
            disabled: true),
  Field.new(name: 'sex',
            type: 'select_box',
            show_on_minify_form: true,
            required: true,
            display_name_en: 'Sex',
            help_text_en: "This information is copied from the \"Individual's Details\" form",
            option_strings_source: 'lookup lookup-gender',
            matchable: true,
            editable: false,
            disabled: true),
  Field.new(name: 'age',
            type: 'numeric_field',
            display_name_en: 'Age',
            help_text_en: "This information is copied from the \"Individual's Details\" form",
            show_on_minify_form: true,
            required: true,
            matchable: true,
            editable: false,
            disabled: true),
  Field.new(name: 'date_of_birth',
            type: 'date_field',
            display_name_en: 'Date of Birth',
            help_text_en: "This information is copied from the \"Individual's Details\" form",
            show_on_minify_form: true,
            matchable: true,
            editable: false,
            disabled: true),
  Field.new(name: 'religion',
            type: 'select_box',
            multi_select: true,
            display_name_en: 'Religion',
            help_text_en: "This information is copied from the \"Individual's Details\" form",
            option_strings_source: 'lookup lookup-religion',
            editable: false,
            disabled: true),
  Field.new(name: 'address_current',
            type: 'textarea',
            required: false,
            display_name_en: 'Current Address',
            help_text_en: "This information is copied from the \"Individual's Details\" form",
            editable: false,
            disabled: true),
  Field.new(name: 'landmark_current',
            type: 'text_field',
            display_name_en: 'Landmark',
            help_text_en: "This information is copied from the \"Individual's Details\" form",
            editable: false,
            disabled: true),
  Field.new(name: 'location_current',
            type: 'select_box',
            display_name_en: 'Current Location',
            help_text_en: "This information is copied from the \"Individual's Details\" form",
            option_strings_source: 'Location',
            disabled: true),
  Field.new(name: 'separator_current_caregiver',
            type: 'separator',
            display_name_en: "Who does the client currently live with?"),
  Field.new(name: 'care_arrangements_type',
            type: 'select_box',
            display_name_en: "What are the child's current care arrangements?",
            help_text_en: "This information is copied from the \"Care Arrangements\" form",
            option_strings_source: "lookup lookup-care-arrangements-type",
            editable: false,
            disabled: true),
  Field.new(name: 'care_arrangements_type_notes',
            type: 'textarea',
            display_name_en: 'Care Arrangement Notes',
            help_text_en: "This information is copied from the \"Care Arrangements\" form",
            editable: false,
            disabled: true),
  Field.new(name: 'care_agency_name',
            type: 'text_field',
            display_name_en: 'Name of Agency Providing Care Arrangements',
            help_text_en: "This information is copied from the \"Care Arrangements\" form",
            editable: false,
            disabled: true),
  Field.new(name: 'name_caregiver',
            type: 'text_field',
            display_name_en: 'Name of Current Caregiver',
            help_text_en: "This information is copied from the \"Care Arrangements\" form",
            editable: false,
            disabled: true),
  Field.new(name: 'relationship_caregiver',
            type: 'select_box',
            display_name_en: 'Relationship of the Caregiver to the Child',
            help_text_en: "This information is copied from the \"Care Arrangements\" form",
            option_strings_source: 'lookup lookup-family-relationship',
            editable: false,
            disabled: true),
  Field.new(name: 'caregiver_age',
            type: 'numeric_field',
            display_name_en: "Caregiver's Age",
            help_text_en: "This information is copied from the \"Care Arrangements\" form",
            editable: false,
            disabled: true),
  Field.new(name: 'address_caregiver',
            type: 'textarea',
            display_name_en: 'Address where the child is currently living?',
            help_text_en: "This information is copied from the \"Care Arrangements\" form",
            editable: false,
            disabled: true),
  Field.new(name: 'location_caregiver',
            type: 'select_box',
            display_name_en: "Caregiver's Location",
            help_text_en: "This information is copied from the \"Care Arrangements\" form",
            option_strings_source: 'Location',
            editable: false,
            disabled: true),
  Field.new(name: 'separator_family_section',
            type: 'separator',
            display_name_en: 'Information About Family Members',
            help_text_en: "This information is copied from the \"Family Details\" form"),
  Field.new(name: 'family_details_section',
            type: 'subform',
            editable: true,
            display_name_en: 'Family Details',
            disabled: true,
            subform: FormSection.find_by(unique_id: 'family_details_section'),
            subform_section_configuration: {
              fields: %w[
                relation_name
                relation
                relation_is_caregiver
                relation_age
                relation_date_of_birth
                relation_is_alive
                relation_occupation
                relation_address_current
                relation_location_current
              ],
              # For OR conditions use multiples hash
              # For AND conditions use one object and specify the conditions inside
              # e.g: { relation: %w[father mother], relation_is_alive: 'alive' }
              display_conditions: [
                {
                  relation: %w[father mother]
                },
                {
                  relation_is_caregiver: true
                },
                {
                  relation_include_on_ser: true
                }
              ]
            }),
  Field.new(name: 'occupation_caregiver',
            type: 'text_field',
            display_name_en: "Caregiver's Occupation",
            visible: false),
  Field.new(name: 'mother_name',
            type: 'text_field',
            display_name_en: "Mother's Full Name",
            visible: false),
  Field.new(name: 'mother_dob',
            type: 'date_field',
            display_name_en: "Mother's DOB",
            visible: false),
  Field.new(name: 'mother_age',
            type: 'numeric_field',
            display_name_en: "Mother's Age",
            visible: false),
  Field.new(name: 'mother_address',
            type: 'textarea',
            display_name_en: "Mother's Address",
            visible: false),
  Field.new(name: 'mother_location',
            type: 'select_box',
            display_name_en: "Mother's Location",
            option_strings_source: 'Location',
            visible: false),
  Field.new(name: 'mother_occupation',
            type: 'text_field',
            display_name_en: "Mother's Occupation",
            visible: false),
  Field.new(name: 'mother_status',
            type: 'select_box',
            display_name_en: "Mother's Status",
            option_strings_text_en: [
              { id: 'unknown', display_text: 'Unknown' },
              { id: 'alive', display_text: 'Alive' },
              { id: 'dead', display_text: 'Dead' }
            ].map(&:with_indifferent_access),
            visible: false),
  Field.new(name: 'father_name',
            type: 'text_field',
            display_name_en: "Father's Full Name",
            visible: false),
  Field.new(name: 'father_dob',
            type: 'date_field',
            display_name_en: "Father's DOB",
            visible: false),
  Field.new(name: 'father_age',
            type: 'numeric_field',
            display_name_en: "Father's Age",
            visible: false),
  Field.new(name: 'father_address',
            type: 'textarea',
            display_name_en: "Father's Address",
            visible: false),
  Field.new(name: 'father_location',
            type: 'select_box',
            display_name_en: "Father's Location",
            option_strings_source: 'Location',
            visible: false),
  Field.new(name: 'father_occupation',
            type: 'text_field',
            display_name_en: "Father's Occupation",
            visible: false),
  Field.new(name: 'father_status',
            type: 'select_box',
            display_name_en: "Father's Status",
            option_strings_text_en: [
              { id: 'unknown', display_text: 'Unknown' },
              { id: 'alive', display_text: 'Alive' },
              { id: 'dead', display_text: 'Dead' }
            ].map(&:with_indifferent_access),
            visible: false),
  Field.new(name: 'subform_other_children_section',
            type: 'subform',
            subform_section: subform_other_children_section,
            editable: true,
            display_name_en: 'Other children in the family',
            visible: false),
  Field.new(name: 'separator_case_referral_investigation',
            type: 'separator',
            display_name_en: "Case Referral and Investigation"),
  Field.new(name: 'referral_person',
            type: 'text_field',
            display_name_en: 'Name of Complainant or Person who made the referral',
            help_text_en: "This information is copied from the \"Referral Details\" form",
            editable: false,
            disabled: true),
  Field.new(name: 'referral_source_type',
            type: 'select_box',
            display_name_en: 'Source',
            help_text_en: "This information is copied from the \"Referral Details\" form",
            option_strings_source: "lookup lookup-referral-source-type",
            editable: false,
            disabled: true),
  Field.new(name: 'referral_source_type_other',
            type: 'text_field',
            display_name_en: 'If Other, please specify',
            help_text_en: "This information is copied from the \"Referral Details\" form",
            editable: false,
            disabled: true),
  Field.new(name: 'identification_date',
            type: 'date_field',
            selected_value: 'today',
            required: false,
            display_name_en: 'Date case identified / reported',
            help_text_en: "This information is copied from the \"Individual's Details\" form",
            date_validation: 'not_future_date',
            editable: false,
            disabled: true),
  Field.new(name: 'other_details_case_investigation',
            type: 'text_field',
            display_name_en: 'Other details',
            help_text_en: "Who was consulted, home visits, time spent conducting the investigation"),
  Field.new(name: 'separator_home_circumstances',
            type: 'separator',
            display_name_en: 'Home circumstances'),
  Field.new(name: 'child_background',
            type: 'textarea',
            display_name_en: 'Background of client',
            guiding_questions_en: "Brief family history. What are the circumstances that led the child to be found in need of care and protection? "),
  Field.new(name: 'comprehensive_assessment_living_conditions_home',
            display_name_en: 'What is the general condition of the home?',
            help_text_en: "This information is copied from the \"Household Living Conditions and Socio-Economic Situation\" form",
            type: 'textarea',
            editable: false,
            disabled: true),
  Field.new(name: 'comprehensive_assessment_integration_family_child_feel',
            display_name_en: 'How does the client feel about living with this particular caregiver and family, including alternative care arrangement and/or RHC?',
            type: 'textarea',
            help_text_en: "This information is copied from the \"Integration into the Family\" form",
            editable: false,
            disabled: true),
  Field.new(name: 'comprehensive_assessment_integration_family_positive_or_difficulties',
            display_name_en: 'What is positive and what difficulties, if any, does she/he experience?',
            type: 'textarea',
            help_text_en: "This information is copied from the \"Integration into the Family\" form",
            editable: false,
            disabled: true),
  Field.new(name: 'assessment_safety_protective_capacities',
            type: 'textarea',
            display_name_en: 'What are the protective capacities/strengths in the client and his/her parents and family? ',
            guiding_questions_en: 'For example, the parent is willing to address issues of concern and meet the needs of the client and has the cognitive, physical and emotional capacity to do so; there is evidence of a healthy relationship between the parent and client.',
            help_text_en: "This information is copied from the \"Assessment\" form",
            editable: false,
            disabled: true),
  Field.new(name: 'other_details_client_background',
            type: 'textarea',
            display_name_en: 'Other details',
            help_text_en: "Physical and socio-economic conditions of the home, family relations – with parents, children,  and/or other adults in the home."),
  Field.new(name: 'separator_findings',
            type: 'separator',
            display_name_en: 'Findings'),
  Field.new(name: 'protection_concerns',
            type: 'select_box',
            multi_select: true,
            display_name_en: 'Protection Concerns',
            help_text_en: "This information is copied from the \"Protection Concerns\" form",
            required: false,
            option_strings_source: 'lookup lookup-protection-concerns',
            editable: false,
            disabled: true),
  Field.new(name: 'assessment_evidence_protection_concerns',
            type: 'textarea',
            display_name_en: 'What evidence was found to support the suspected client protection concerns?',
            help_text_en: "This information is copied from the \"Protection Concerns\" form",
            guiding_questions_en: 'Include observations, talking to the client, parents and other parties.',
            editable: false,
            disabled: true),
  Field.new(name: 'protection_concerns_other',
            type: 'text_field',
            display_name_en: 'If Other, please specify',
            help_text_en: "This information is copied from the \"Protection Concerns\" form",
            editable: false,
            disabled: true),
  Field.new(name: 'assessment_safety_category',
            type: 'select_box',
            display_name_en: "Identify the appropriate category regarding the client's safety",
            option_strings_text_en: [
              { id: 'safe', display_text: "Safe" },
              { id: 'safety_plan', display_text: "Safety plan is required for the client to remain in the home" },
              { id: 'unsafe', display_text: "Unsafe" },
            ].map(&:with_indifferent_access),
            editable: false,
            disabled: true,
            guiding_questions_en: [
              "Safe:  No safety threats are identified at this time.",
              "Based on currently available information, the client is not likely to be in immediate danger of serious harm. The decision can be made to either close the case or refer to non-child protection services.",
              "Safe: Threats are present, client is not vulnerable or the client is vulnerable but protective capacities exists.",
              "Safety plan is required for the client to remain in the home:  One or more safety threats are present, but the client is not vulnerable or the client is vulnerable but protective capacities exist. Protecting safety interventions have been planned or taken that immediately mitigates the identified safety threats. Based on protecting interventions, client will remain in the home at this time, for as long as the safety interventions mitigate the danger. Safety plan is required for the client to remain in the home.",
              "Unsafe:  One or more safety threats are present, the client is vulnerable and protective capacities are insufficient. Placement with a “fit person” in temporary alternative care is the only protecting intervention possible for one or more children. Without placement, one or more children will likely be in danger of immediate or serious harm.",
            ].join("\n"),
            help_text_en: "This information is copied from the \"Assessment\" form"),
  Field.new(name: 'assessment_safety_category_decision',
            type: 'textarea',
            display_name_en: 'Please explain your decision',
            help_text_en: "This information is copied from the \"Assessment\" form",
            editable: false,
            disabled: true),
  Field.new(name: 'caregiver_willing_to_continue',
            type: 'radio_button',
            display_name_en: 'Is caregiver willing to continue taking care of the child?',
            help_text_en: "This information is copied from the \"Care Arrangements\" form",
            option_strings_source: 'lookup lookup-yes-no',
            editable: false,
            disabled: true),
  Field.new(name: 'caregiver_willing_to_continue_for_how_long',
            type: 'text_field',
            display_name_en: 'If yes, for how long?',
            help_text_en: "This information is copied from the \"Care Arrangements\" form",
            editable: false,
            disabled: true),
  Field.new(name: 'other_details_findings',
            type: 'textarea',
            display_name_en: 'Other details',
            help_text_en: "What is the capacity of caregiver, parents or extended family to care for the client in the immediate and longer term? Other relevant findings on whether client is in need of care and protection or not."),
  Field.new(name: 'separator_recommendations',
            type: 'separator',
            display_name_en: 'Social worker recommendations'),
  Field.new(name: 'intervention_service_to_be_provided_case',
            type: 'select_box',
            display_name_en: 'What are the recommended interventions for this case?',
            help_text_en: "This information is copied from the \"Case Plan\" form",
            multi_select: true,
            option_strings_source:"lookup lookup-interventions-type",
            guiding_questions_en: [
                                   "(1) Direct service interventions are intended to strengthen family functioning and address protection concerns so that the child remains in the home or is able to be reintegrated with family once concerns have been addressed.",
                                   "(2) Interventions include the use of community based organisations or services to address family strengthening needs and protection concerns, e.g. counselling, economic opportunities, substance abuse or psychiatric treatment for parent/caregiver.",
                                   "(3) This requires matching the child with a licensed foster parent. The child could be placed in foster care from the RHC (if already in temporary custody) or from their home."
                                  ].join("\n"),
            editable: false,
            disabled: true),
  Field.new(name: 'alternative_care_steps',
            type: 'textarea',
            display_name_en: 'If it is recommended to place the child in formal alternative care, what steps have been taken to identify other options?',
            help_text_en: 'e.g. family strengthening services and/or placement with relatives in informal kinship care.'),
  Field.new(name: 'recommended_actions',
            type: 'textarea',
            display_name_en: 'Other recommended actions'),
  Field.new(name: 'separator_ser',
            type: 'separator',
            display_name_en: 'SER Information'),
  Field.new(name: 'name_compile_ser',
            type: 'text_field',
            display_name_en: 'Name and position of person who compiled the SER '),
  Field.new(name: 'office_compile_ser',
            type: 'select_box',
            display_name_en: 'Location of Office',
            option_strings_source: 'Location',
            help_text_en: "region / district"),
  Field.new(name: 'date_ser',
            type: 'date_field',
            display_name_en: 'Date')
]

FormSection.create_or_update!(
  unique_id: 'social_enquiry_report',
  parent_form: 'case',
  visible: true,
  order_form_group: 77,
  order: 0,
  order_subform: 0,
  form_group_id: 'social_enquiry_report',
  fields: social_enquiry_report_fields,
  editable: true,
  name_en: 'Social Enquiry Report',
  description_en: 'Social Enquiry Report'
)
