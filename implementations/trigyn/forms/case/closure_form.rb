# frozen_string_literal: true

closure_fields = [
  Field.new('name' => 'closure_approved',
            'type' => 'tick_box',
            'tick_box_label_en' => 'Yes',
            'display_name_en' => 'Approved by Manager',
            'disabled' => true,
            'editable' => false),
  Field.new('name' => 'closure_approved_date',
            'type' => 'date_field',
            'display_name_en' => 'Date',
            'disabled' => true,
            'editable' => false),
  Field.new('name' => 'closure_approved_comments',
            'type' => 'textarea',
            'display_name_en' => 'Manager Comments',
            'disabled' => true,
            'editable' => false),
  Field.new('name' => 'approval_status_closure',
            'type' => 'select_box',
            'display_name_en' => 'Approval Status',
            'editable' => false,
            'disabled' => true,
            'option_strings_source' => 'lookup lookup-approval-status'),
  Field.new('name' => 'approval_obtained_child',
            'type' => 'tick_box',
            'tick_box_label_en' => 'Yes',
            'display_name_en' => 'Approved by Child'),
  Field.new('name' => 'approval_obtained_caregiver',
            'type' => 'tick_box',
            'tick_box_label_en' => 'Yes',
            'display_name_en' => 'Approved by Caregiver'),
  Field.new('name' => 'approval_obtained_details',
            'display_name_en' => 'Please provide details',
            'type' => 'textarea',
            'help_text_en' => 'Include contact details and relationship of caregiver to child'),
  Field.new('name' => 'status',
            'type' => 'select_box',
            'selected_value' => Record::STATUS_OPEN,
            'display_name_en' => 'Case Status',
            'option_strings_source' => 'lookup lookup-case-status'),
  Field.new('name' => 'date_closure',
            'type' => 'date_field',
            'display_name_en' => 'Date of Closure'),
  Field.new('name' => 'closure_reason',
            'type' => 'select_box',
            'display_name_en' => 'Primary reason for case closure',
            'option_strings_text_en' => [
              { id: 'overall_goal_of_the_case_plan', display_text: "Overall goal of the case plan has been met, child is safe from harm, child's care and wellbeing is supported and there are no additional concerns" },
              { id: 'child_has_turned_18_years_old', display_text: 'Child has turned 18 years-old (ensure a transition plan is in place and the case know where and how to access support)' },
              { id: 'relocation_of_child_to_an_area', display_text: 'Relocation of child to an area where there is no agency to transfer the case to' },
              { id: 'child_departed_for_a_durable_solution', display_text: 'Child departed for a durable solution where there is no agency to transfer the case to' },
              { id: 'child_no_longer_contactable', display_text: 'Child no longer contactable (wait at least 3 months before closing the case)' },
              { id: 'death_of_child', display_text: 'Death of child' },
              { id: 'no_further_action_possible_required', display_text: 'No further action possible/required' },
              { id: 'case_opened_in_error', display_text: 'Case opened in error' },
              { id: 'other', display_text: 'Other' }
            ].map(&:with_indifferent_access)),
  Field.new('name' => 'closure_reason_other',
            'type' => 'text_field',
            'display_name_en' => 'If other, please specify '),
  Field.new('name' => 'closure_details',
            'display_name_en' => 'Provide further details on reason for case closure',
            'type' => 'textarea'),
  Field.new('name' => 'closure_situation_child_separator',
            'display_name_en' => 'Situation of child at case closure',
            'type' => 'separator'),
  Field.new('name' => 'closure_how_long_case_opened',
            'display_name_en' => 'How long has this case been opened',
            'type' => 'text_field',
            'help_text_en' => 'In weeks'),
  Field.new('name' => 'closure_current_situation',
            'display_name_en' => 'Brief summary on current situation of case',
            'type' => 'textarea',
            'help_text_en' => 'Describe history and current situation of the case, including last services provided/actions taken'),
  Field.new('name' => 'closure_child_moving_separator',
            'display_name_en' => 'If child is moving to a new location',
            'type' => 'separator'),
  Field.new('name' => 'closure_new_child_location',
            'display_name_en' => 'New address / location where the child is living',
            'type' => 'textarea',
            'help_text_en' => 'Provide as much detail as possible about the location so others can find the location e.g. house, landmark, street, city/village, district, province (adapt according to context)'),
  Field.new('name' => 'closure_new_telephone_contact_details',
            'display_name_en' => 'Telephone / other contact details',
            'type' => 'text_field'),
  Field.new('name' => 'closure_care_arrangements_separator',
            'display_name_en' => 'Care arrangement at closure',
            'type' => 'separator'),
  Field.new('name' => 'closure_current_care_arrangement',
            'display_name_en' => "Child's current care / living arrangement",
            'type' => 'select_box',
            'option_strings_text_en' => [
              { id: 'parent_s', display_text: 'Parent(s)' },
              { id: 'step_parent', display_text: 'Step parent' },
              { id: 'customary_caregiver_s', display_text: 'Customary caregiver(s)' },
              { id: 'kafala', display_text: 'Kafala' },
              { id: 'independent_living', display_text: 'Independent living' },
              { id: 'child_headed_household', display_text: 'Child-headed household' },
              { id: 'adult_sibling', display_text: 'Adult sibling' },
              { id: 'kinship_care_extended_family', display_text: 'Kinship care/extended family' },
              { id: 'foster_care', display_text: 'Foster care' },
              { id: 'residential_care', display_text: 'Residential care' },
              { id: 'unrelated_adult', display_text: 'Unrelated adult' },
              { id: 'no_care_arrangement', display_text: 'No care arrangement' },
              { id: 'other', display_text: 'Other' }
            ].map(&:with_indifferent_access)),
  Field.new('name' => 'closure_current_care_arrangement_other',
            'display_name_en' => 'If other, please specify',
            'type' => 'text_field'),
  Field.new('name' => 'closure_current_care_arrangement_permanent',
            'display_name_en' => 'Is this the permanent care arrangement',
            'type' => 'radio_button',
            'option_strings_source' => 'lookup lookup-yes-no'),
  Field.new('name' => 'closure_current_care_arrangement_permanent_no',
            'display_name_en' => 'If no, please specify why',
            'type' => 'text_field'),
  Field.new('name' => 'primary_caregiver_separator',
            'display_name_en' => 'Primary caregiver details',
            'type' => 'separator'),
  Field.new('name' => 'name_caregiver_closing',
            'type' => 'text_field',
            'display_name_en' => 'Caregiver Name'),
  Field.new('name' => 'relationship_caregiver_closing',
            'type' => 'text_field',
            'display_name_en' => 'Relationship to child'),
  Field.new('name' => 'address_caregiver_closing',
            'type' => 'textarea',
            'display_name_en' => 'Caregiver Address'),
  Field.new('name' => 'location_caregiver_closing',
            'type' => 'select_box',
            'display_name_en' => 'Caregiver Location',
            'option_strings_source' => 'Location'),
  Field.new('name' => 'closure_caregiver_contact_details',
            'display_name_en' => "Caregiver's telephone / other contact details",
            'type' => 'textarea'),
  Field.new('name' => 'closure_arrangements_separator',
            'display_name_en' => 'Arrangements made to support successful closure of the case',
            'type' => 'separator'),
  Field.new('name' => 'case_closure_process',
            'display_name_en' => 'Describe the case closure process',
            'type' => 'textarea',
            'help_text_en' => 'Provide details of meetings held to discuss closure of the case e.g. between the caseworker and the child, between the caseworker and the caregiver(s), between the caseworker and the supervisor.'),
  Field.new('name' => 'closure_discussed_child',
            'display_name_en' => 'Has the case closure been discussed and agreed with the child?',
            'type' => 'radio_button',
            'option_strings_source' => 'lookup lookup-yes-no'),
  Field.new('name' => 'closure_discussed_child_no',
            'display_name_en' => 'If no, please specify why',
            'type' => 'text_field'),
  Field.new('name' => 'closure_discussed_caregiver',
            'display_name_en' => 'Has the case closure been discussed and agreed with the caregiver(s)?',
            'type' => 'radio_button',
            'option_strings_source' => 'lookup lookup-yes-no'),
  Field.new('name' => 'closure_discussed_caregiver_no',
            'display_name_en' => 'If no, please specify why',
            'type' => 'text_field'),
  Field.new('name' => 'closure_child_feedback_form',
            'display_name_en' => "Has feedback on case management process been gathered from child using 'child feedback form'?",
            'type' => 'radio_button',
            'option_strings_source' => 'lookup lookup-yes-no'),
  Field.new('name' => 'closure_child_feedback_form_no',
            'display_name_en' => 'If no, please specify why',
            'type' => 'text_field'),
  Field.new('name' => 'closure_caregiver_feedback_form',
            'display_name_en' => "Has feedback on case management process been gathered from caregiver using 'caregiver feedback form'?",
            'type' => 'radio_button',
            'option_strings_source' => 'lookup lookup-yes-no'),
  Field.new('name' => 'closure_caregiver_feedback_form_no',
            'display_name_en' => 'If no, please specify why',
            'type' => 'text_field'),
  Field.new('name' => 'closure_final_followup_meeting',
            'display_name_en' => "Has a final follow-up meeting in 3 months' time been planned with the child and/or caregiver(s) to ensure the situation remains stable?",
            'type' => 'radio_button',
            'option_strings_source' => 'lookup lookup-yes-no'),
  Field.new('name' => 'closure_final_followup_meeting_no',
            'display_name_en' => 'If no, please specify why',
            'type' => 'text_field'),
  Field.new('name' => 'closure_child_case_file_complete',
            'display_name_en' => "Is the child's case file complete and up-to-date with all relevant documents included?",
            'type' => 'radio_button',
            'option_strings_source' => 'lookup lookup-yes-no'),
  Field.new('name' => 'closure_child_case_file_complete_no',
            'display_name_en' => 'If no, please specify why',
            'type' => 'text_field'),
  Field.new('name' => 'closure_case_file_stored',
            'display_name_en' => 'How will the case file be stored?',
            'type' => 'select_box',
            'option_strings_text_en' => [
              { id: 'electronically', display_text: 'Electronically' },
              { id: 'hard_copy', display_text: 'Hard copy' },
              { id: 'both', display_text: 'Both' }
            ].map(&:with_indifferent_access)),
  Field.new('name' => 'closure_case_file_stored_date',
            'display_name_en' => "Until what date will the child's case file be stored?",
            'type' => 'date_field'),
  Field.new('name' => 'closure_child_told_contact_support',
            'display_name_en' => 'Has the child been told who to contact if s/he has questions, concerns or to access support if required?',
            'type' => 'radio_button',
            'option_strings_source' => 'lookup lookup-yes-no'),
  Field.new('name' => 'closure_child_told_contact_support_no',
            'display_name_en' => 'If no, please specify why',
            'type' => 'text_field'),
  Field.new('name' => 'closure_child_contact_support',
            'display_name_en' => 'Who has the child been told to contact if s/he has questions, concerns or to access support if required?',
            'type' => 'textarea',
            'help_text_en' => 'Provide names and contact details')
]

FormSection.create_or_update!(
  :unique_id => 'closure_form',
  :parent_form => 'case',
  'visible' => true,
  :order_form_group => 110,
  :order => 21,
  :order_subform => 0,
  :form_group_id => 'closure',
  'editable' => true,
  :fields => closure_fields,
  'name_en' => 'Closure',
  'description_en' => 'Closure'
)
