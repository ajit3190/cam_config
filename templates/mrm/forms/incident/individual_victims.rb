# frozen_string_literal: true

individual_victims_subform_fields = [
  Field.new(
    'mobile_visible' => true,
    'required' => false,
    'show_on_minify_form' => false,
    'hidden_text_field' => false,
    'autosum_total' => false,
    'autosum_group' => '',
    'hide_on_view_page' => false,
    'visible' => true,
    'editable' => true,
    'disabled' => false,
    'multi_select' => false,
    'name' => 'id_number',
    'type' => 'text_field',
    'display_name_en' => "Victim's ID (if applicable)",
    'help_text_en' => 'ID applies to those CTFMRs which assign an ID number to each individual victim for security purposes'
  ),
  Field.new(
    'mobile_visible' => true,
    'required' => true,
    'show_on_minify_form' => false,
    'hidden_text_field' => false,
    'autosum_total' => false,
    'autosum_group' => '',
    'hide_on_view_page' => false,
    'visible' => true,
    'editable' => true,
    'disabled' => false,
    'name' => 'violations_ids',
    'type' => 'select_box',
    'multi_select' => true,
    'display_name_en' => 'Violations',
    'option_strings_source' => 'violations'
  ),
  Field.new(
    'mobile_visible' => true,
    'required' => false,
    'show_on_minify_form' => false,
    'hidden_text_field' => false,
    'autosum_total' => false,
    'autosum_group' => '',
    'hide_on_view_page' => false,
    'visible' => true,
    'editable' => true,
    'disabled' => false,
    'multi_select' => false,
    'name' => 'individual_multiple_violations',
    'type' => 'tick_box',
    'tick_box_label_en' => 'Yes',
    'display_name_en' => 'Is the victim associated with more than one violation?'
  ),
  Field.new(
    'mobile_visible' => true,
    'required' => false,
    'show_on_minify_form' => false,
    'hidden_text_field' => false,
    'autosum_total' => false,
    'autosum_group' => '',
    'hide_on_view_page' => false,
    'visible' => true,
    'editable' => true,
    'disabled' => false,
    'multi_select' => false,
    'name' => 'individual_sex',
    'type' => 'select_box',
    'display_name_en' => 'Sex of the victim',
    'option_strings_source' => 'lookup lookup-gender-unknown',
    'help_text_en' => 'This field is mandatory'
  ),
  Field.new(
    'mobile_visible' => true,
    'required' => false,
    'show_on_minify_form' => false,
    'hidden_text_field' => false,
    'autosum_total' => false,
    'autosum_group' => '',
    'hide_on_view_page' => false,
    'visible' => true,
    'editable' => true,
    'disabled' => false,
    'multi_select' => false,
    'name' => 'individual_age',
    'type' => 'numeric_field',
    'display_name_en' => "Victim's age",
    'help_text_en' => 'At the time of violation. (This field is mandatory)'
  ),
  Field.new(
    'mobile_visible' => true,
    'required' => false,
    'show_on_minify_form' => false,
    'hidden_text_field' => false,
    'autosum_total' => false,
    'autosum_group' => '',
    'hide_on_view_page' => false,
    'visible' => true,
    'editable' => true,
    'disabled' => false,
    'multi_select' => false,
    'name' => 'date_of_birth',
    'type' => 'date_field',
    'display_name_en' => "Victim's date of birth (if known)",
    'date_validation' => 'not_future_date'
  ),
  Field.new(
    'mobile_visible' => true,
    'required' => false,
    'show_on_minify_form' => false,
    'hidden_text_field' => false,
    'autosum_total' => false,
    'autosum_group' => '',
    'hide_on_view_page' => false,
    'visible' => true,
    'editable' => true,
    'disabled' => false,
    'multi_select' => false,
    'name' => 'individual_age_estimated',
    'type' => 'tick_box',
    'tick_box_label_en' => 'Yes',
    'display_name_en' => 'Is the age estimated? '
  ),
  Field.new(
    'mobile_visible' => true,
    'required' => false,
    'show_on_minify_form' => false,
    'hidden_text_field' => false,
    'autosum_total' => false,
    'autosum_group' => '',
    'hide_on_view_page' => false,
    'visible' => true,
    'editable' => true,
    'disabled' => false,
    'name' => 'nationality',
    'type' => 'select_box',
    'multi_select' => true,
    'display_name_en' => 'Nationality/ies of the victim',
    'option_strings_source' => 'lookup lookup-nationality'
  ),
  Field.new(
    'mobile_visible' => true,
    'required' => false,
    'show_on_minify_form' => false,
    'hidden_text_field' => false,
    'autosum_total' => false,
    'autosum_group' => '',
    'hide_on_view_page' => false,
    'visible' => true,
    'editable' => true,
    'disabled' => false,
    'multi_select' => false,
    'name' => 'ethnicity',
    'type' => 'select_box',
    'display_name_en' => 'Ethnic affiliation of the victim',
    'option_strings_source' => 'lookup lookup-ethnicity'
  ),
  Field.new(
    'mobile_visible' => true,
    'required' => false,
    'show_on_minify_form' => false,
    'hidden_text_field' => false,
    'autosum_total' => false,
    'autosum_group' => '',
    'hide_on_view_page' => false,
    'visible' => true,
    'editable' => true,
    'disabled' => false,
    'multi_select' => false,
    'name' => 'religion',
    'type' => 'select_box',
    'display_name_en' => 'Religious affiliation of the victim',
    'option_strings_source' => 'lookup lookup-religion'
  ),
  Field.new(
    'mobile_visible' => true,
    'required' => false,
    'show_on_minify_form' => false,
    'hidden_text_field' => false,
    'autosum_total' => false,
    'autosum_group' => '',
    'hide_on_view_page' => false,
    'visible' => true,
    'editable' => true,
    'disabled' => false,
    'multi_select' => false,
    'name' => 'child_consent_follow_up',
    'type' => 'radio_button',
    'display_name_en' => 'Is the victim and/or adult caregiver willing to be contacted again about the violations for other investigation purposes?',
    'help_text_en' => '',
    'option_strings_source' => 'lookup lookup-yes-no'
  ),
  Field.new(
    'mobile_visible' => true,
    'required' => false,
    'show_on_minify_form' => false,
    'hidden_text_field' => false,
    'autosum_total' => false,
    'autosum_group' => '',
    'hide_on_view_page' => false,
    'visible' => true,
    'editable' => true,
    'disabled' => false,
    'multi_select' => false,
    'name' => 'child_consent_for_reporting',
    'type' => 'radio_button',
    'display_name_en' => 'Does the victim consent to the use of their non-identifiable personal information for CTFMR anonymized reporting purposes?',
    'option_strings_source' => 'lookup lookup-yes-no'
  ),
  Field.new(
    'mobile_visible' => true,
    'required' => false,
    'show_on_minify_form' => false,
    'hidden_text_field' => false,
    'autosum_total' => false,
    'autosum_group' => '',
    'hide_on_view_page' => false,
    'visible' => true,
    'editable' => true,
    'disabled' => false,
    'multi_select' => false,
    'name' => 'child_consent_data_sharing_yes_no',
    'type' => 'radio_button',
    'display_name_en' => "Does the victim and/or adult caregiver consent to share the vcitim's name and other personal details for referral to response services?",
    'option_strings_source' => 'lookup lookup-yes-no'
  ),
  Field.new(
    'mobile_visible' => true,
    'required' => false,
    'show_on_minify_form' => false,
    'hidden_text_field' => false,
    'autosum_total' => false,
    'autosum_group' => '',
    'hide_on_view_page' => false,
    'visible' => true,
    'editable' => true,
    'disabled' => false,
    'name' => 'child_consent_data_sharing',
    'type' => 'select_box',
    'multi_select' => true,
    'display_name_en' => "With whom is the victim and/or adult caregiver willing to share the victim's name and other personal details for referral purposes?",
    'option_strings_text_en' => [
      {
        'id' => 'unicef',
        'display_text' => 'UNICEF'
      },
      {
        'id' => 'other_ctfmr_member_s',
        'display_text' => 'Other CTFMR member(s)'
      },
      {
        'id' => 'ctfmr_partners_service_providers',
        'display_text' => 'CTFMR partners/service providers'
      },
      {
        'id' => 'no_one',
        'display_text' => 'No one'
      },
      {
        'id' => 'other',
        'display_text' => 'Other'
      }
    ],
    'display_conditions_subform' => { 'eq' => { 'child_consent_data_sharing_yes_no' => 'true' } }
  ),
  Field.new(
    'mobile_visible' => true,
    'required' => false,
    'show_on_minify_form' => false,
    'hidden_text_field' => false,
    'autosum_total' => false,
    'autosum_group' => '',
    'hide_on_view_page' => false,
    'visible' => true,
    'editable' => true,
    'disabled' => false,
    'multi_select' => false,
    'name' => 'child_consent_data_sharing_other',
    'type' => 'textarea',
    'display_name_en' => "If â€˜Other', please provide details",
    'help_text_en' => 'E.g. on the specific CTFMR member/UN agency/NGO/partner/service provider with whom the victim/adult caregiver consented to share personal details',
    'display_conditions_subform' => {
      'and' => [
        {'eq' => { 'child_consent_data_sharing_yes_no' => 'true' }},
        {'in' => { 'child_consent_data_sharing' => %w[other] }}
      ]
    }
  ),
  Field.new(
    'mobile_visible' => true,
    'required' => false,
    'show_on_minify_form' => false,
    'hidden_text_field' => false,
    'autosum_total' => false,
    'autosum_group' => '',
    'hide_on_view_page' => false,
    'visible' => true,
    'editable' => true,
    'disabled' => false,
    'name' => 'individual_vulnerabilities',
    'type' => 'select_box',
    'multi_select' => true,
    'display_name_en' => "Victim's vulnerabilities",
    'option_strings_source' => 'lookup lookup-vulnerability-type'
  ),
  Field.new(
    'mobile_visible' => true,
    'required' => false,
    'show_on_minify_form' => false,
    'hidden_text_field' => false,
    'autosum_total' => false,
    'autosum_group' => '',
    'hide_on_view_page' => false,
    'visible' => true,
    'editable' => true,
    'disabled' => false,
    'multi_select' => false,
    'name' => 'victim_disability_type',
    'type' => 'select_box',
    'display_name_en' => 'If the victim is a person with a disability, please clarify type of disability',
    'option_strings_text_en' => [
      {
        'id' => 'mental_disability',
        'display_text' => 'Mental disability'
      },
      {
        'id' => 'physical_disability',
        'display_text' => 'Physical disability'
      },
      {
        'id' => 'mental_and_physical_disability',
        'display_text' => 'Mental and physical disability'
      }
    ],
    'display_conditions_subform' => { 'in' => { 'individual_vulnerabilities' => %w[disabled] } }
  ),
  Field.new(
    'mobile_visible' => true,
    'required' => false,
    'show_on_minify_form' => false,
    'hidden_text_field' => false,
    'autosum_total' => false,
    'autosum_group' => '',
    'hide_on_view_page' => false,
    'visible' => true,
    'editable' => true,
    'disabled' => false,
    'multi_select' => false,
    'name' => 'individual_additional_details',
    'type' => 'textarea',
    'display_name_en' => 'Additional details'
  ),
  Field.new(
    'mobile_visible' => true,
    'required' => false,
    'show_on_minify_form' => false,
    'hidden_text_field' => false,
    'autosum_total' => false,
    'autosum_group' => '',
    'hide_on_view_page' => false,
    'visible' => true,
    'editable' => true,
    'disabled' => false,
    'multi_select' => false,
    'name' => 'victim_deprived_liberty_security_reasons',
    'type' => 'select_box',
    'display_name_en' => 'Was/were the victim(s) deprived of liberty?',
    'option_strings_source' => 'lookup lookup-yes-no-unknown'
  ),
  Field.new(
    'mobile_visible' => true,
    'required' => false,
    'show_on_minify_form' => false,
    'hidden_text_field' => false,
    'autosum_total' => false,
    'autosum_group' => '',
    'hide_on_view_page' => false,
    'visible' => true,
    'editable' => true,
    'disabled' => false,
    'multi_select' => false,
    'name' => 'reasons_deprivation_liberty',
    'type' => 'select_box',
    'display_name_en' => 'What are the reasons for the deprivation of liberty?',
    'option_strings_source' => 'lookup lookup-reasons-deprivation-liberty',
    'display_conditions_subform' => { 'eq' => { 'victim_deprived_liberty_security_reasons' => 'true' } }
  ),
  Field.new(
    'mobile_visible' => true,
    'required' => false,
    'show_on_minify_form' => false,
    'hidden_text_field' => false,
    'autosum_total' => false,
    'autosum_group' => '',
    'hide_on_view_page' => false,
    'visible' => true,
    'editable' => true,
    'disabled' => false,
    'name' => 'entity_responsible_deprivation_liberty',
    'type' => 'select_box',
    'multi_select' => false,
    'display_name_en' => 'Select the entity responsible for the deprivation of liberty',
    'option_strings_source' => 'lookup lookup-perpetrator-category-type',
    'display_conditions_subform' => { 'eq' => { 'victim_deprived_liberty_security_reasons' => 'true' } }
  ),
  Field.new(
    'mobile_visible' => true,
    'required' => false,
    'show_on_minify_form' => false,
    'hidden_text_field' => false,
    'autosum_total' => false,
    'autosum_group' => '',
    'hide_on_view_page' => false,
    'visible' => true,
    'editable' => true,
    'disabled' => false,
    'multi_select' => false,
    'name' => 'armed_force_group_party_name',
    'type' => 'select_box',
    'display_name_en' => 'To which armed force, group, or other party did the perpetrator belong?',
    'option_strings_source' => 'lookup lookup-armed-force-group-or-other-party',
    'guiding_questions_en' => 'CTFMRs should ensure that the lists of perpetrators in the MRM IMS are as comprehensive and up-to-date as possible. In case new parties need to be added to the list, or should an armed force change its name, please contact the MRM Technical Reference Group.',
    'display_conditions_subform' => { 'eq' => { 'victim_deprived_liberty_security_reasons' => 'true' } },
    'option_strings_condition' => {
      'armed-force' => { 'eq' => { 'entity_responsible_deprivation_liberty' => 'armed_force' } },
      'armed-group' => { 'eq' => { 'entity_responsible_deprivation_liberty' => 'armed_group' } },
      'other-party' => { 'eq' => { 'entity_responsible_deprivation_liberty' => 'other_party_to_the_conflict' } },
      'unknown' => { 'eq' => { 'entity_responsible_deprivation_liberty' => 'unknown' } }
    }
  ),
  Field.new(
    'mobile_visible' => true,
    'required' => false,
    'show_on_minify_form' => false,
    'hidden_text_field' => false,
    'autosum_total' => false,
    'autosum_group' => '',
    'hide_on_view_page' => false,
    'visible' => true,
    'editable' => true,
    'disabled' => false,
    'name' => 'facilty_victims_held',
    'type' => 'select_box',
    'multi_select' => true,
    'display_name_en' => 'Please select the facilty where the victims(s) was/were being held',
    'option_strings_source' => 'lookup lookup-detention-facility-type',
    'display_conditions_subform' => { 'eq' => { 'victim_deprived_liberty_security_reasons' => 'true' } }
  ),
  Field.new(
    'mobile_visible' => true,
    'required' => false,
    'show_on_minify_form' => false,
    'hidden_text_field' => false,
    'autosum_total' => false,
    'autosum_group' => '',
    'hide_on_view_page' => false,
    'visible' => true,
    'editable' => true,
    'disabled' => false,
    'multi_select' => false,
    'name' => 'other_facilty_victims_held',
    'type' => 'text_field',
    'display_name_en' => "If 'Other', please provide details ",
    'display_conditions_subform' => {
      'and' => [
        {'eq' => { 'victim_deprived_liberty_security_reasons' => 'true' }},
        {'in' => { 'facilty_victims_held' => %w[other] }}
      ]
    }
  ),
  Field.new(
    'mobile_visible' => true,
    'required' => false,
    'show_on_minify_form' => false,
    'hidden_text_field' => false,
    'autosum_total' => false,
    'autosum_group' => '',
    'hide_on_view_page' => false,
    'visible' => true,
    'editable' => true,
    'disabled' => false,
    'multi_select' => false,
    'name' => 'details_reasons_deprivation_liberty',
    'type' => 'textarea',
    'display_name_en' => 'Please provide details on the reasons for deprivation of liberty',
    'display_conditions_subform' => { 'eq' => { 'victim_deprived_liberty_security_reasons' => 'true' } }
  ),
  Field.new(
    'mobile_visible' => true,
    'required' => false,
    'show_on_minify_form' => false,
    'hidden_text_field' => false,
    'autosum_total' => false,
    'autosum_group' => '',
    'hide_on_view_page' => false,
    'visible' => false,
    'editable' => true,
    'disabled' => false,
    'multi_select' => false,
    'name' => 'length_deprivation_liberty',
    'type' => 'date_field',
    'display_name_en' => 'Date of deprivation of liberty',
    'display_conditions_subform' => { 'eq' => { 'victim_deprived_liberty_security_reasons' => 'true' } }
  ),
  Field.new(
    'mobile_visible' => true,
    'required' => false,
    'show_on_minify_form' => false,
    'hidden_text_field' => false,
    'autosum_total' => false,
    'autosum_group' => '',
    'hide_on_view_page' => false,
    'visible' => true,
    'editable' => true,
    'disabled' => false,
    'multi_select' => false,
    'name' => 'depriviation_liberty_date_range',
    'type' => 'tick_box',
    'tick_box_label_en' => 'Yes',
    'display_name_en' => 'Is this a Date Range?',
    'display_conditions_subform' => { 'eq' => { 'victim_deprived_liberty_security_reasons' => 'true' } }
  ),
  Field.new(
    'mobile_visible' => true,
    'required' => false,
    'show_on_minify_form' => false,
    'hidden_text_field' => false,
    'autosum_total' => false,
    'autosum_group' => '',
    'hide_on_view_page' => false,
    'visible' => true,
    'editable' => true,
    'disabled' => false,
    'multi_select' => false,
    'name' => 'depriviation_liberty_date',
    'type' => 'date_field',
    'display_name_en' => 'Date of the deprivation of liberty',
    'date_validation' => 'not_future_date',
    'help_text_en' => 'dd-mmm-yyyy (Start date if this is a date range)',
    'display_conditions_subform' => { 'eq' => { 'victim_deprived_liberty_security_reasons' => 'true' } }
  ),
  Field.new(
    'mobile_visible' => true,
    'show_on_minify_form' => false,
    'hidden_text_field' => false,
    'autosum_total' => false,
    'autosum_group' => '',
    'hide_on_view_page' => false,
    'visible' => true,
    'editable' => true,
    'disabled' => false,
    'multi_select' => false,
    'name' => 'depriviation_liberty_end_date',
    'type' => 'date_field',
    'display_name_en' => 'End date of the deprivation of liberty',
    'required' => false,
    'help_text_en' => 'dd-mmm-yyyy',
    'date_validation' => 'not_future_date',
    'display_conditions_subform' => { 'eq' => { 'depriviation_liberty_date_range' => true } }
  ),
  Field.new(
    'mobile_visible' => true,
    'required' => false,
    'show_on_minify_form' => false,
    'hidden_text_field' => false,
    'autosum_total' => false,
    'autosum_group' => '',
    'hide_on_view_page' => false,
    'visible' => true,
    'editable' => true,
    'disabled' => false,
    'multi_select' => false,
    'name' => 'torture_punishment_while_deprivated_liberty',
    'type' => 'select_box',
    'display_name_en' => 'Was/were the child(ren) subject to torture or other cruel, inhuman or degrading treatment or punishment while deprived of liberty',
    'option_strings_source' => 'lookup lookup-yes-no-unknown',
    'display_conditions_subform' => { 'eq' => { 'victim_deprived_liberty_security_reasons' => 'true' } }
  ),
  Field.new(
    'mobile_visible' => true,
    'required' => false,
    'show_on_minify_form' => false,
    'hidden_text_field' => false,
    'autosum_total' => false,
    'autosum_group' => '',
    'hide_on_view_page' => false,
    'visible' => true,
    'editable' => true,
    'disabled' => false,
    'name' => 'type_torture_treatment_punishment_child_subjected',
    'type' => 'select_box',
    'multi_select' => true,
    'display_name_en' => 'What type of torture or other cruel, inhuman or degrading treatment or punishment was the child subjected to?',
    'option_strings_source' => 'lookup lookup-ill-treatment-violations',
    'display_conditions_subform' => {
      'and' => [
        {'eq' => { 'victim_deprived_liberty_security_reasons' => 'true' }},
        {'eq' => { 'torture_punishment_while_deprivated_liberty' => 'true' }}
      ]
    }
  ),
  Field.new(
    'mobile_visible' => true,
    'required' => false,
    'show_on_minify_form' => false,
    'hidden_text_field' => false,
    'autosum_total' => false,
    'autosum_group' => '',
    'hide_on_view_page' => false,
    'visible' => true,
    'editable' => true,
    'disabled' => false,
    'multi_select' => false,
    'name' => 'other_torture_punishment_while_deprivated_liberty',
    'type' => 'textarea',
    'display_name_en' => 'If yes, please provide details.',
    'display_conditions_subform' => {
      'and' => [
        {'eq' => { 'victim_deprived_liberty_security_reasons' => 'true' }},
        {'eq' => { 'torture_punishment_while_deprivated_liberty' => 'true' }}
      ]
    }
  )
]
individual_victims_subform = FormSection.create_or_update!(
  name_en: 'Nested Individual victim(s) Subform',
  fields: individual_victims_subform_fields,
  description_en: 'Nested Individual victim(s) Subform',
  unique_id: 'individual_victims_subform_section',
  parent_form: 'incident',
  visible: false,
  order: 10,
  order_form_group: 50,
  order_subform: 1,
  editable: true,
  core_form: true,
  is_nested: true,
  is_first_tab: false,
  initial_subforms: 1,
  collapsed_field_names: %w[individual_sex individual_age],
  mobile_form: false,
  subform_append_only: false
)

individual_victims_fields = [
  Field.new(
    'mobile_visible' => true,
    'required' => false,
    'show_on_minify_form' => false,
    'hidden_text_field' => false,
    'autosum_total' => false,
    'autosum_group' => '',
    'hide_on_view_page' => false,
    'visible' => true,
    'disabled' => false,
    'multi_select' => false,
    'name' => 'individual_victims',
    'type' => 'subform',
    'editable' => true,
    'subform_section' => individual_victims_subform,
    'collapse' => 'expanded',
    'display_name_en' => 'Individual victim'
  )
]

FormSection.create_or_update!(
  name_en: 'Individual victim(s)',
  fields: individual_victims_fields,
  description_en: 'Individual victim(s)',
  unique_id: 'individual_victims',
  parent_form: 'incident',
  visible: true,
  order: 5,
  order_form_group: 50,
  order_subform: 0,
  editable: true,
  core_form: true,
  is_first_tab: false,
  initial_subforms: 0,
  mobile_form: false,
  form_group_id: 'additional_details'
)
